"use strict";var SearchBox=React.createClass({displayName:"SearchBox",getInitialState:function(){return{data:[],urlInputClasses:"url"}},handleURLChange:function(a){var b=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");b.test(a.target.value)&&(this.setState({urlInputClasses:"url loading"}),$.ajax({headers:{"X-CSRF-TOKEN":config.csrf},url:"fetch",method:"POST",cache:!1,data:{url:a.target.value},dataType:"json",success:function(b){this.setState({resultsStyle:{display:"block"}}),this.setState({data:b}),this.setState({text:b.description+" "+a.target.value}),config.authenticated?(this.setState({tweetStyle:{display:"inline-block"}}),this.setState({connectStyle:{display:"none"}})):(this.setState({connectStyle:{display:"inline-block"}}),this.setState({tweetStyle:{display:"none"}})),this.setState({urlInputClasses:"url"})}.bind(this)}))},handleTextChange:function(a){this.setState({text:a.target.value})},sendTweet:function(){$.ajax({headers:{"X-CSRF-TOKEN":config.csrf},url:"sendtweet",method:"POST",data:{image:this.state.data.image,text:this.state.text},dataType:"json",success:function(a){}.bind(this)})},render:function(){return React.createElement("div",{className:"container"},React.createElement("div",{className:"intro"},"Fetch and tweet Open Graph data of a web pages"),React.createElement("div",{className:"search-box"},React.createElement("input",{type:"text",className:this.state.urlInputClasses,placeholder:"Paste a URL here",onChange:this.handleURLChange})),React.createElement("div",{className:"results",style:this.state.resultsStyle},React.createElement("div",{className:"grid gut10"},React.createElement("div",{className:"col perc30"},React.createElement("img",{src:this.state.data.image})),React.createElement("div",{className:"col perc70"},React.createElement("textarea",{className:"tweet-text",disabled:0==config.authenticated,onChange:this.handleTextChange,value:this.state.text}),React.createElement("div",{className:"button primary tweet",style:this.state.tweetStyle,onClick:this.sendTweet},"Tweet"),React.createElement("a",{href:"twitter/login",className:"button primary connect",style:this.state.connectStyle},"Connect")))))}});ReactDOM.render(React.createElement(SearchBox,null),document.getElementById("wrapper"));